<div class="profile-container" *ngIf="profile">
  <mat-card class="profile-card">
    <div class="profile-header">
      <!-- Use the safe navigation operator to handle potential null values -->
      <img
        mat-card-avatar
        [src]="profile?.profilePicture || 'default-profile-picture.png'"
        alt="Profile Picture"
        class="profile-picture"
      />
      <div>
        <h2>{{ profile?.name }}</h2>
      </div>
    </div>

    <mat-divider></mat-divider>

    <!-- Tutor-specific fields -->
    <div *ngIf="isTutorProfile(profile)">
      <h3>Instruments Taught</h3>
      <mat-list dense>
        <mat-list-item *ngFor="let instrument of profile?.instruments">
          <mat-icon mat-list-icon>music_note</mat-icon>
          {{ instrument }}
        </mat-list-item>
      </mat-list>

      <h3>Pricing</h3>
      <p>Starting at: <strong>{{ profile?.pricing | currency }}</strong></p>

      <h3>Online Lessons</h3>
      <p>
        <mat-icon color="primary">
          {{ profile?.onlineLessons ? 'check_circle' : 'cancel' }}
        </mat-icon>
        {{ profile?.onlineLessons ? 'Available' : 'Not Available' }}
      </p>
    </div>

    <h3>Rating</h3>
    <mat-progress-bar
      mode="determinate"
      [value]="(profile?.rating / 5) * 100"
    ></mat-progress-bar>
    <p>{{ profile?.rating }} / 5</p>

    <h3>Reviews</h3>
    <mat-list>
      <mat-list-item *ngFor="let review of profile?.reviews">
        <p><strong>{{ review?.reviewer }}</strong>:</p>
        <p>{{ review?.comment }}</p>
      </mat-list-item>
    </mat-list>
  </mat-card>
</div>


<!-- Student-specific fields -->
    <div *ngIf="isStudentProfile(profile)">
      <h3>Enrolled Courses</h3>
      <mat-list dense>
        <mat-list-item *ngFor="let course of profile?.enrolledCourses">
          {{ course }}
        </mat-list-item>
      </mat-list>

      <h3>Completed Courses</h3>
      <mat-list dense>
        <mat-list-item *ngFor="let course of profile?.completedCourses">
          {{ course }}
        </mat-list-item>
      </mat-list>

      <h3>Achievements</h3>
      <mat-chip-list>
        <mat-chip *ngFor="let achievement of profile?.achievements">
          {{ achievement }}
        </mat-chip>
      </mat-chip-list>
    </div>


